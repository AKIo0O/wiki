
// for mvc pages
exports.Wiki = function(k){

    var Wiki = k.create({
        name: "string",
        content: "string",
        group: "string",
        user: "object"
    }, "Wiki");

    k.all("findByUser",function(userinfo, callback){
        
        var res = [];

        this.query({}, function(err, wikis){
            
            var user;
            if(err) return callback(err, res);
            for(var i =0, l = wikis.length; i < l; i++){
                user = wikis[i].user;
                if(user && user._id == userinfo._id) res.push(wikis[i]);
            }
            callback(err, res);
        });
    });
        
    return Wiki;
};

